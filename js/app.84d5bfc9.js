(function(t){function e(e){for(var a,i,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={app:0},r=[];function i(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"7a0eb98e","chunk-0b65ffb6":"8f09f4eb","chunk-2d0a3577":"5c370725","chunk-2d0a43df":"49642bba","chunk-2d0aa90c":"cd1519b9","chunk-2d0aab07":"3a3dba34","chunk-2d0abc00":"c4aeebf3","chunk-2d0ae937":"9b978668","chunk-2d0aeb45":"09cafab5","chunk-2d0af08c":"be30efc8","chunk-2d0afa49":"e9d1edd0","chunk-2d0b2762":"4ccb83f0","chunk-2d0b6187":"fea81e83","chunk-2d0ba136":"cdc20342","chunk-2d0bb267":"5de02936","chunk-2d0bcec1":"f09cc75b","chunk-2d0bdf38":"9a132d13","chunk-2d0bff92":"e5d5efbc","chunk-2d0c0494":"f6ec8c16","chunk-2d0c0a09":"a067e551","chunk-2d0c4313":"3b38ebcc","chunk-2d0c46d1":"47c50e75","chunk-2d0c512b":"e873bd47","chunk-2d0cf16e":"e68e5cc3","chunk-2d0d056d":"26900b7c","chunk-2d0d0645":"a59b5523","chunk-2d0d2f22":"671b60c0","chunk-2d0d61fd":"81852c50","chunk-2d0d7e63":"13ddd402","chunk-2d0e1b57":"e720f971","chunk-2d0e1fbe":"2900e6b0","chunk-2d0e22d6":"7e8fce1e","chunk-2d0e542a":"5aad21b2","chunk-2d0e57ec":"fe5b8492","chunk-2d0e6553":"cd919002","chunk-2d0e6c86":"5d3c34c1","chunk-2d0ea098":"16551036","chunk-2d0f0a11":"a145582e","chunk-2d208ac5":"45015686","chunk-2d209408":"c71f6f43","chunk-2d20f745":"82477bfe","chunk-2d20ff23":"0db7deea","chunk-2d2138c7":"9ee6b3e9","chunk-2d216f3b":"d2210c51","chunk-2d217e5b":"4bcef4b7","chunk-2d21b84a":"cdf28761","chunk-2d21dcd2":"9ba0f5d2","chunk-2d21f327":"1d87bdee","chunk-2d2214b3":"5d7e6500","chunk-2d221799":"c37bd00e","chunk-2d221814":"d4f70c12","chunk-2d221a34":"83463dce","chunk-2d22502a":"c6da651b","chunk-2d226775":"58826065","chunk-2d229411":"af9d37ff","chunk-2d2295e9":"cf94dd88","chunk-2d22c171":"64d07829","chunk-2d22c2b8":"60ce0ab4","chunk-2d22ca58":"c3776251","chunk-2d2311f7":"1e74a811","chunk-2d237ee7":"a00e5e1f","chunk-2d238465":"80d9b945","chunk-30597b4a":"d1f95dbd","chunk-7532b3ea":"ee52a302","chunk-e13e4362":"ec400a96"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=o[t]=[e,a]}));e.push(n[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"042b":function(t,e,n){"use strict";var a=n("3d14"),o=n.n(a);o.a},"232d":function(t,e,n){},"2aca":function(t,e,n){},"2da8":function(t,e,n){"use strict";var a=n("9116"),o=n.n(a);o.a},3030:function(t,e,n){"use strict";var a=n("fcc4"),o=n.n(a);o.a},"3d14":function(t,e,n){},4266:function(t,e,n){"use strict";var a=n("5889"),o=n.n(a);o.a},"49e7":function(t,e,n){"use strict";var a=n("f489"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=n("2877"),s={},c=Object(i["a"])(s,o,r,!1,null,null,null),l=c.exports,u=n("5f5b"),d=n("ee98"),h=n.n(d),f=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.host?[n("Navbar",{staticClass:"top"}),n("div",{staticClass:"main",class:{hideLeft:!t.showLeft,showLeft:t.showLeft}},[n("div",{staticClass:"left"},[n("router-view")],1),n("MainField",{staticClass:"right"})],1),n("Footer",{staticClass:"bottom"}),n("notifications",{attrs:{group:"main",position:"bottom right"}})]:n("div",{staticClass:"container-fluid",staticStyle:{"margin-top":"100px"}},[n("div",[t._m(0),n("div",{staticClass:"row"},[t._m(1),n("div",{staticClass:"col-12"},[n("form",{staticClass:"d-flex justify-content-center align-items-baseline"},[n("h6",{staticClass:"text-nowrap"},[t._v("Device Server Address:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.hostInput,expression:"hostInput"}],staticClass:"form-control mx-3",staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"https://192.168.1.123:8080"},domProps:{value:t.hostInput},on:{input:function(e){e.target.composing||(t.hostInput=e.target.value)}}}),n("button",{staticClass:"btn btn-success",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.connect(e)}}},[t._v("Connect")])])])])])])],2)},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"d-flex justify-content-center"},[n("div",{staticClass:"brand"},[n("img",{attrs:{src:"/logo.png"}}),n("h1",{staticClass:"mt-3 mb-5"},[t._v("AutoTouch Dashboard")])])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 pb-2 d-flex justify-content-center"},[n("ol",{staticClass:"text-secondary",staticStyle:{"max-width":"600px"}},[n("li",[t._v("Turn on Web Server at AutoTouch>Settings, then input the address here.")]),n("li",[t._v("Use "),n("b",[t._v("https://")]),t._v(" for AutoTouch v8.2.9 and above, use "),n("b",[t._v("http://")]),t._v(" for older versions.")]),n("li",[t._v("Mind the server port.")])])])}],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-dark bg-dark"},[n("div",{staticClass:"container-fluid"},[n("button",{staticClass:"btn-collapse",on:{click:function(e){return t.toggleLeft()}}},[n("svg",{staticClass:"bi bi-list",attrs:{width:"2.2em",height:"2.2em",viewBox:"0 0 16 16",fill:"white",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M2.5 11.5A.5.5 0 013 11h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 7h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4A.5.5 0 013 3h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z","clip-rule":"evenodd"}})])]),n("a",{staticClass:"navbar-brand",attrs:{href:"../"}},[t._v("AutoTouch Dashboard")]),n("div",{staticClass:"navbar-nav ml-auto"},[n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.switchLog(!t.showLog)}}},[t._v("Show Log")])])])])},b=[],g={name:"Navbar",data(){return{showLeft:!0,showLog:!1}},methods:{switchLog(t){this.showLog=t,this.$store.commit("setShowLog",t)},toggleLeft(){this.showLeft=!this.showLeft,this.$store.commit("setShowLeft",this.showLeft)}}},y=g,w=(n("5f67"),Object(i["a"])(y,v,b,!1,null,"6e6596a8",null)),C=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-list-field"},[n("div",{staticClass:"toolbar",staticStyle:{"padding-left":"16px","padding-right":"0"}},[n("Breadcrumb"),n("div",[n("button",{staticClass:"btn btn-default btn-sm mr-2",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.loadFiles()}}},[n("svg",{staticClass:"bi bi-arrow-repeat",attrs:{width:"2.0em",height:"2.0em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M2.854 7.146a.5.5 0 00-.708 0l-2 2a.5.5 0 10.708.708L2.5 8.207l1.646 1.647a.5.5 0 00.708-.708l-2-2zm13-1a.5.5 0 00-.708 0L13.5 7.793l-1.646-1.647a.5.5 0 00-.708.708l2 2a.5.5 0 00.708 0l2-2a.5.5 0 000-.708z","clip-rule":"evenodd"}}),n("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a4.995 4.995 0 00-4.192 2.273.5.5 0 01-.837-.546A6 6 0 0114 8a.5.5 0 01-1.001 0 5 5 0 00-5-5zM2.5 7.5A.5.5 0 013 8a5 5 0 009.192 2.727.5.5 0 11.837.546A6 6 0 012 8a.5.5 0 01.501-.5z","clip-rule":"evenodd"}})])]),n("b-dropdown",{attrs:{variant:"button",size:"sm","no-caret":""}},[n("template",{slot:"button-content"},[n("svg",{staticClass:"bi bi-three-dots",attrs:{width:"2.0em",height:"2.0em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M3 9.5a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z","clip-rule":"evenodd"}})])]),n("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.newFolder()}}},[t._v("New Folder")]),n("b-dropdown-item",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.newFile()}}},[t._v("New Script")]),n("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-upload-file",modifiers:{"modal-upload-file":!0}}]},[t._v("Upload File")])],2)],1)],1),n("div",{staticClass:"file-list-wrapper"},[t._m(0),n("div",{staticClass:"file-list-content-wrapper"},[n("table",{staticClass:"table table-striped",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[n("tbody",t._l(t.files,(function(e){return n("tr",{key:t.fileName(e)},[n("td",[n("img",{attrs:{src:"/icons/"+e.iconName}}),t.isFolder(e.iconName)||t.isLuaPackage(e.filePath)?n("router-link",{attrs:{to:e.filePath}},[t._v(t._s(t.fileName(e)))]):n("a",{attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.clickOnFile(e)}}},[t._v(t._s(t.fileName(e)))])],1),n("td",[t.isScript(e.filePath)?[t.isRunning(e.filePath)?n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.stop(e.filePath)}}},[t._v("Stop")]):n("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.play(e.filePath)}}},[t._v("Play")])]:t._e()],2),n("td",[n("b-dropdown",{attrs:{variant:"button",size:"sm","no-caret":""}},[n("template",{slot:"button-content"},[n("svg",{staticClass:"bi bi-gear",attrs:{width:"1.6em",height:"1.6em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 014.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 01-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 011.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 012.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 012.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 011.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 01-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 018.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 001.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 00.52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 00-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 00-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 00-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 00-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 00.52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 001.255-.52l.094-.319z","clip-rule":"evenodd"}}),n("path",{attrs:{"fill-rule":"evenodd",d:"M8 5.754a2.246 2.246 0 100 4.492 2.246 2.246 0 000-4.492zM4.754 8a3.246 3.246 0 116.492 0 3.246 3.246 0 01-6.492 0z","clip-rule":"evenodd"}})])]),n("b-dropdown-item",{on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.deleteFile(e.filePath)}}},[t._v("Delete")]),n("b-dropdown-item",{on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.renameFile(e.filePath)}}},[t._v("Rename")])],2)],1)])})),0)])])]),n("b-modal",{ref:"modal-upload-file",attrs:{id:"modal-upload-file",title:"Upload File","hide-footer":""}},[n("form",{staticClass:"d-flex justify-content-between",attrs:{enctype:"multipart/form-data",method:"post",id:"uploadForm"}},[n("input",{attrs:{id:"file",name:"file",type:"file"}}),n("input",{attrs:{type:"submit",value:"Upload",id:"uploadSubmit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.uploadFile()}}})])])],1)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table table-striped",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[n("thead",[n("tr",[n("th",[t._v("Filename")]),n("th",[t._v("Control")]),n("th",[t._v("Options")])])])])}],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"breadcrumb",domProps:{innerHTML:t._s(t.breadcrumbHTML)}})},L=[],$=n("2f62"),F={name:"breadcrumb",data(){return{breadcrumbHTML:null}},created(){this.updateBreadcrumbHTML()},watch:{currentDir:function(){this.updateBreadcrumbHTML()}},computed:{...Object($["b"])({currentDir:"getCurrentDir"})},methods:{updateBreadcrumbHTML(){const t=this.$store.state.currentDir;for(var e=t.split("/"),n="",a="",o=0;o<e.length;o++)0===o?a="/":a+=1===o?e[o]:"/"+e[o],0===o?n+='<li class="breadcrumb-item"><a href="#'+a+'">Home</a></li>':o===e.length-1?n+='<li class="breadcrumb-item active">'+e[o]+"</li>":n+='<li class="breadcrumb-item"><a href="#'+a+'">'+e[o]+"</a></li>";this.breadcrumbHTML=n}}},P=F,S=(n("c466"),Object(i["a"])(P,x,L,!1,null,"706ca0ee",null)),j=S.exports;const I=n("69d9");var O={name:"FileList",components:{Breadcrumb:j},data(){return{files:[],currentPath:"/",runningScripts:[],refreshIntervalId:null}},created(){this.currentPath=this.$route.path,this.$store.commit("setCurrentDir",this.currentPath),this.loadFiles(),this.refreshIntervalId=setInterval(()=>{this.getRunningScripts()},3e3)},beforeRouteUpdate(t,e,n){n(),this.currentPath=this.$route.path,this.$store.commit("setCurrentDir",this.currentPath),this.loadFiles()},destroyed(){clearInterval(this.refreshIntervalId)},methods:{clickOnFile(t){this.$store.commit("setShowLog",!1);const e=I.getFileType(t.filePath);"js"!==e&&"lua"!==e&&"txt"!==e&&"img"!==e||this.getFileContent(t.filePath)},hasFiles(){return this.files&&this.files.length>0},loadFiles(){const t=this;var e=this.currentPath,n="/files?path="+encodeURIComponent(e);t.$http.get(n).then((function(e){t.files=e.data.files,t.$notify({group:"main",type:"success",text:"Files reloaded!"})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))},getRunningScripts(){const t=this;var e="/runningScripts";t.$http.get(e).then((function(e){t.runningScripts=e.data})).catch((function(t){console.log(t)}))},fileName(t){var e=I.getFilename(t.filePath);return e},fileNameLink(t){var e,n=t.filePath,a=t.iconName;return e=I.isFolder(a)?"/?path="+encodeURIComponent(n):I.isImage(a)?"/file/view?path="+encodeURIComponent(n):"/file/edit?path="+encodeURIComponent(n),e},play(t){const e=this;var n="/control/start_playing?path="+encodeURIComponent(t);e.$http.get(n).then((function(t){var n=t.data;"success"!==n.status&&e.$notify({group:"main",type:"error",text:n.info})})).catch((function(t){e.$notify({group:"main",type:"error",text:t})}))},stop(t){const e=this;var n="/control/stop_playing?path="+encodeURIComponent(t);e.$http.get(n).then((function(t){var n=t.data;"success"!==n.status&&e.$notify({group:"main",type:"error",text:n.info})})).catch((function(t){e.$notify({group:"main",type:"error",text:t})}))},renameFile(t){const e=this;var n=prompt("Please input the new filename","");if(n){var a=e.currentPath+"/"+n;o(t,a)}function o(t,n){var a="/file/rename?path="+encodeURIComponent(t)+"&newPath="+encodeURIComponent(n);e.$http.get(a).then((function(t){var n=t.data;"success"===n.status?e.loadFiles():e.$notify({group:"main",type:"error",text:n.info})})).catch((function(t){e.$notify({group:"main",type:"error",text:t})}))}},deleteFile(t){const e=this;if(confirm("Are you sure to delete the file?")){var n="/file/delete?path="+encodeURIComponent(t);e.$http.get(n).then((function(t){var n=t.data;"success"===n.status?e.loadFiles():e.$notify({group:"main",type:"error",text:n.info})})).catch((function(t){e.$notify({group:"main",type:"error",text:t})}))}},isFolder(t){return I.isFolder(t)},isLuaPackage(t){return I.isLuaPackage(t)},isScript(t){return I.isScript(t)},isRunning(t){return this.runningScripts.includes(t)},newFile(){const t=this;var e=prompt("Please input the filename","");if(e){e.toLowerCase().endsWith(".txt")||e.toLowerCase().endsWith(".lua")||e.toLowerCase().endsWith(".js")||(e+=".js");var n=t.currentPath+"/"+e;a(n)}function a(e){var n="/file/new?path="+encodeURIComponent(e);t.$http.get(n).then((function(e){var n=e.data;"success"===n.status?t.loadFiles():t.$notify({group:"main",type:"error",text:n.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))}},newFolder(){const t=this;var e=prompt("Please input the folder name","");if(e){var n=t.currentPath+"/"+e;a(n)}function a(e){var n="/file/newFolder?path="+encodeURIComponent(e);t.$http.get(n).then((function(e){var n=e.data;"success"===n.status?t.loadFiles():t.$notify({group:"main",type:"error",text:n.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))}},uploadFile(){const t=this;var e=document.getElementById("file").files[0];if(e){var n=this.currentPath+"/"+e.name,a="/file/upload?path="+encodeURIComponent(n),o=new FormData;o.append("file",e),t.$http.post(a,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=e.data;"success"===n.status?(t.loadFiles(),t.$refs["modal-upload-file"].hide(),t.$notify({group:"main",type:"success",text:"Uploaded successfully!"})):t.$notify({group:"main",type:"error",text:n.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))}},getFileContent(t){const e=this;e.$store.commit("setShowLoading",!0);var n="/file/content?path="+encodeURIComponent(t);e.$http.get(n).then((function(n){var a=n.data;if("success"===a.status){const n=a.content;e.$store.commit("setCurrentFile",{filePath:t,content:n})}else e.$notify({group:"main",type:"error",text:a.info})})).catch((function(t){e.$notify({group:"main",type:"error",text:t})})).finally((function(){e.$store.commit("setShowLoading",!1)}))}}},T=O,D=(n("92f5"),Object(i["a"])(T,k,_,!1,null,"670ca500",null)),M=D.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showLoading?n("div",{staticClass:"loading"},[n("bounce-loader")],1):t._e(),t.showLog?n("div",[n("LogView")],1):[n("Editor",{style:{display:"js"==t.currentFileType||"lua"==t.currentFileType||"txt"==t.currentFileType?"block":"none"}}),"img"==t.currentFileType?n("div",[n("ImageView")],1):t._e()]],2)},R=[],U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolbar"},[t.currentScript.filePath?n("div",{domProps:{textContent:t._s("File: "+t.currentScript.filePath)}}):n("div"),n("div",{staticClass:"d-flex flex-row justify-content-end align-items-center pr-3"},[t.code?[n("div",{staticClass:"m-1"},[t._v("Font Size")]),n("b-form-spinbutton",{staticClass:"m-2",attrs:{inline:"",size:"sm"},model:{value:t.options.fontSize,callback:function(e){t.$set(t.options,"fontSize",e)},expression:"options.fontSize"}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.options.theme,expression:"options.theme"}],staticClass:"m-2 mr-5",staticStyle:{height:"30px"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.options,"theme",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"vs-dark"}},[t._v("Dark")]),n("option",{attrs:{value:"vs"}},[t._v("Light")])]),n("button",{staticClass:"btn btn-secondary btn-sm m-2",on:{click:function(e){return t.play()}}},[t._v(" Play "),n("span",{staticClass:"span-btn-subtitle"},[t._v("(Ctrl+r,⌘+r)")])]),t.isSaving?n("button",{staticClass:"btn btn-secondary btn-sm m-2",attrs:{disabled:""}},[t._v(" Saving "),n("span",{staticClass:"span-btn-subtitle"},[t._v("Ctrl+s,⌘+s)")])]):n("button",{staticClass:"btn btn-secondary btn-sm m-2",on:{click:function(e){return t.saveFile()}}},[t._v(" Save "),n("span",{staticClass:"span-btn-subtitle"},[t._v("Ctrl+s,⌘+s)")])])]:t._e()],2)]),n("div",{staticClass:"editor-field"},[null!=t.code?n("MonacoEditor",{staticClass:"editor",attrs:{language:t.language,theme:t.options.theme,options:t.options},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e()],1)])},z=[],H=n("059c");const W=n("69d9");var A={name:"Editor",components:{MonacoEditor:H["a"]},data(){return{fileType:null,isSaving:!1,code:this.currentScript?this.currentScript.content:null,language:null,options:{fontSize:13,theme:"vs-dark"}}},created(){window.addEventListener("keydown",this.onHotKey,!1)},beforeDestroy:function(){window.removeEventListener("keydown",this.onkey)},methods:{saveFile(){const t=this;t.isSaving=!0;const e=this.currentScript.filePath;var n=this.code,a="/file/update?path="+encodeURIComponent(e),o="content="+encodeURIComponent(n);t.$http.post(a,o).then((function(a){var o=a.data;"success"===o.status?t.$store.commit("setCurrentFile",{filePath:e,content:n}):t.$notify({group:"main",type:"error",text:o.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})})).then((function(){t.isSaving=!1}))},onHotKey(t){if(!t.defaultPrevented)return 83!==t.which&&83!==t.keyCode&&"s"!==t.key||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?void(82!==t.which&&82!==t.keyCode&&"r"!==t.key||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)||(this.play(),t.preventDefault())):(this.saveFile(),void t.preventDefault())},play(){const t=this,e=this.currentScript.filePath;var n="/control/start_playing?path="+encodeURIComponent(e);t.$http.get(n).then((function(e){var n=e.data;"success"!==n.status&&t.$notify({group:"main",type:"error",text:n.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))},updateMode(){"js"===this.fileType?this.language="javascript":"ts"===this.fileType?this.language="typescript":"lua"===this.fileType?this.language="lua":"text"===this.fileType&&(this.language="text")}},computed:{...Object($["b"])({currentScript:"getCurrentFile"})},watch:{currentScript:function(t){this.code=t.content,this.fileType=W.getFileType(t.filePath),this.updateMode()}}},N=A,B=(n("49e7"),Object(i["a"])(N,U,z,!1,null,"6934c49c",null)),K=B.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"log-view"},[n("div",{staticClass:"toolbar d-flex flex-row justify-content-between"},[n("div"),n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.clearLog()}}},[t._v("Clear Log")])]),n("div",{staticClass:"log"},[n("pre",[t._v(t._s(t.log))])])])},q=[],J={name:"LogView",components:{},data(){return{log:null,refreshIntervalId:null}},mounted(){this.getLog(!0),this.refreshIntervalId=setInterval(()=>{this.getLog()},2e3)},destroyed(){clearInterval(this.refreshIntervalId)},methods:{getLog(t=!1){const e=this;t&&e.$store.commit("setShowLoading",!0);var n="/log";e.$http.get(n).then((function(t){var n=t.data;"success"===n.status?e.log=n.content:console.error("Failed to get log:",n.info)})).catch((function(t){e.$notify({group:"main",type:"error",text:t})})).finally((function(){t&&e.$store.commit("setShowLoading",!1)}))},clearLog(){const t=this;var e="/log/clear";t.$http.get(e).then((function(e){var n=e.data;"success"===n.status?(t.log=null,t.$notify({group:"main",type:"success",text:"Cleared!"})):t.$notify({group:"main",type:"error",text:n.info})})).catch((function(e){t.$notify({group:"main",type:"error",text:e})}))}}},G=J,Q=(n("042b"),Object(i["a"])(G,V,q,!1,null,"35591c20",null)),X=Q.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-view"},[n("div",{staticClass:"toolbar"}),n("div",{staticClass:"img-container"},[n("img",{attrs:{src:""+t.currentFile.content,alt:""}})])])},Z=[],tt={name:"ImageView",computed:{...Object($["b"])({currentFile:"getCurrentFile"})}},et=tt,nt=(n("4266"),Object(i["a"])(et,Y,Z,!1,null,"05143bc4",null)),at=nt.exports,ot=n("00d3");const rt=n("69d9");var it={name:"MainField",components:{Editor:K,LogView:X,ImageView:at,BounceLoader:ot["a"]},data(){return{currentFileType:null}},computed:{...Object($["b"])({currentFile:"getCurrentFile",showLog:"getShowLog",showLoading:"getShowLoading"})},watch:{currentFile:function(t){this.currentFileType=rt.getFileType(t.filePath)}}},st=it,ct=(n("9f37"),Object(i["a"])(st,E,R,!1,null,"5aba3c52",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div")])}],ht={name:"Footer"},ft=ht,pt=(n("3030"),Object(i["a"])(ft,ut,dt,!1,null,"93ba9b28",null)),mt=pt.exports;const vt=[{path:"**",component:M}],bt=new f["a"]({routes:vt});var gt={name:"app",router:bt,components:{Navbar:C,MainField:lt,Footer:mt},data(){return{host:null,hostInput:null}},computed:{...Object($["b"])({showLeft:"getShowLeft"})},created(){const t=this.$route.query.host;t&&this.updateHost(t)},methods:{updateHost(t){t&&(this.host=t,t.startsWith("https://")||t.startsWith("http://")?this.$http.defaults.baseURL=t:alert("Please specify it's https:// or http://"),this.$router.replace({query:{host:t}}).catch(()=>{}))},connect(){this.updateHost(this.hostInput)}}},yt=gt,wt=(n("2da8"),Object(i["a"])(yt,p,m,!1,null,"05261a9a",null)),Ct=wt.exports;a["default"].use(f["a"]);const kt=[{path:"/",name:"Home",component:Ct},{path:"/about",name:"About",component:()=>n.e("about").then(n.bind(null,"f820"))}],_t=new f["a"]({mode:"history",base:"/",routes:kt});var xt=_t;a["default"].use($["a"]);var Lt=new $["a"].Store({state:{host:null,showLoading:!1,showLeft:!0,showLog:!1,currentDir:null,currentFile:{filePath:null,content:null}},mutations:{setHost(t,e){t.host=e},setShowLoading(t,e){t.showLoading=e},setShowLeft(t,e){t.showLeft=e},setShowLog(t,e){t.showLog=e},setCurrentDir(t,e){t.currentDir=e},setCurrentFile(t,e){t.currentFile=e}},getters:{getHost:t=>t.host,getShowLoading:t=>t.showLoading,getShowLeft:t=>t.showLeft,getShowLog:t=>t.showLog,getCurrentDir:t=>t.currentDir,getCurrentFile:t=>t.currentFile},modules:{}}),$t=n("bc3a"),Ft=n.n($t);n("944d");a["default"].prototype.$http=Ft.a,a["default"].use(u["a"]),a["default"].use(h.a),a["default"].config.productionTip=!1,new a["default"]({router:xt,store:Lt,render:t=>t(l)}).$mount("#app")},5889:function(t,e,n){},"5f67":function(t,e,n){"use strict";var a=n("2aca"),o=n.n(a);o.a},"69d9":function(t,e,n){"use strict";function a(t){var e=t.split("/");return e[e.length-1]}function o(){var t=window.location.search;if(t.length>2){t=t.substring(1,t.length);for(var e=t.split("&"),n=0;n<e.length;n++){var a=e[n].split("=");if("path"===a[0])return decodeURIComponent(a[1])}}return"/"}function r(t){return 0===t.indexOf("folder")}function i(t){return 0===t.indexOf("bmp")||0===t.indexOf("png")||0===t.indexOf("jpg")||0===t.indexOf("jpeg")}function s(t){const e=t.toLowerCase();return e.endsWith(".js")||e.endsWith(".lua")||e.endsWith(".at")||e.endsWith(".ate")}function c(t){const e=t.toLowerCase();return e.endsWith(".at")}function l(t){const e=t.toLowerCase();return e.endsWith(".js")?"js":e.endsWith(".lua")?"lua":e.endsWith(".txt")?"txt":e.endsWith(".bmp")||e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")?"img":"unkown"}n.r(e),n.d(e,"getFilename",(function(){return a})),n.d(e,"getCurrentPath",(function(){return o})),n.d(e,"isFolder",(function(){return r})),n.d(e,"isImage",(function(){return i})),n.d(e,"isScript",(function(){return s})),n.d(e,"isLuaPackage",(function(){return c})),n.d(e,"getFileType",(function(){return l}))},9116:function(t,e,n){},"92f5":function(t,e,n){"use strict";var a=n("232d"),o=n.n(a);o.a},"944d":function(t,e,n){},"9bfb":function(t,e,n){},"9f37":function(t,e,n){"use strict";var a=n("b860"),o=n.n(a);o.a},b860:function(t,e,n){},c466:function(t,e,n){"use strict";var a=n("9bfb"),o=n.n(a);o.a},f489:function(t,e,n){},fcc4:function(t,e,n){}});
//# sourceMappingURL=app.84d5bfc9.js.map